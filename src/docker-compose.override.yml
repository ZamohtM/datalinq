services:
  datalinq.code:
    environment:
      - ASPNETCORE_ENVIRONMENT=Docker
      - ASPNETCORE_HTTPS_PORTS=5001
      - DataLinq.Code__Instances__0__Name=DataLinq.CodeApi
      - DataLinq.Code__Instances__0__Description=DataLinq.CodeApi instance for testing and development"
      - DataLinq.Code__Instances__0__LoginUrl=https://localhost:6001
      - DataLinq.Code__Instances__0__LogoutUrl=https://localhost:6001
      - DataLinq.Code__Instances__0__CodeApiClientUrl=https://datalinq.api:6001
    ports:
    - "5001:5001" 
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
  datalinq.api:
    environment:
      - ASPNETCORE_ENVIRONMENT=Docker
      - ASPNETCORE_HTTP_PORTS=6000
      - ASPNETCORE_HTTPS_PORTS=6001
      - DataLinq.Api__StoragePath=/app/DataLinq/storage
      - DataLinq.CodeApi__AccessTokenIssuer=https://localhost:6001
      - DataLinq.CodeApi__ClientEndpoints__0=https://localhost
    ports:
    - "6000:6000"
    - "6001:6001" 
    volumes:
      - ${APPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${APPDATA}/Microsoft/UserSecrets:/root/.microsoft/usersecrets:ro
      - ${APPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro
      - ${APPDATA}/ASP.NET/Https:/root/.aspnet/https:ro
